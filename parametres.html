<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paramètres</title>

    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/parametres.css">
</head>

<body>

    <div class="app">

        <aside class="menu">

            <div class="marque">
                <img src="assets/logo.png" class="logo">
                <span>StudMoney</span>
            </div>

            <nav class="navigation">
                <a class="item-menu" href="index.html">Tableau de bord</a>
                <a class="item-menu" href="depenses.html">Dépenses</a>
                <a class="item-menu" href="historique.html">Historique</a>
                <a class="item-menu actif" href="parametres.html">Paramètres</a>
            </nav>

            <div class="bloc-bas">
                <div class="utilisateur">
                    <img src="assets/utilisateur.png">
                    <div>
                        <div class="nom">--</div>
                        <div class="email">--</div>
                    </div>
                </div>
            </div>

        </aside>

        <main class="contenu">

            <header class="entete-page">
                <h1>Paramètres</h1>
                <p>Modifier votre budget et alertes.</p>
            </header>

            <div class="carte-param">

                <label>Budget mensuel (FCFA)</label>
                <input type="number" id="champ-budget" min="1000">

                <label>Seuil d'alerte (%)</label>
                <input type="range" id="champ-seuil" min="50" max="100">

                <div class="valeur-range">
                    <span id="valeur-seuil"></span> %
                </div>

                <button id="btn-enregistrer" class="btn-enregistrer">Enregistrer</button>

            </div>

        </main>

    </div>

    <script src="js/app.js"></script>
    <script src="js/parametres.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            function obtenirCleUtilisateur(email) {
                return `utilisateur_${email}`;
            }

            function obtenirUtilisateurConnecte() {
                const emailConnecte = localStorage.getItem("utilisateurActif");
                if (!emailConnecte) return null;
                
                const cle = obtenirCleUtilisateur(emailConnecte);
                const data = localStorage.getItem(cle);
                return data ? JSON.parse(data) : null;
            }

            const user = obtenirUtilisateurConnecte();
            if (user) {
                const elemNom = document.querySelector(".nom");
                const elemEmail = document.querySelector(".email");
                
                if (elemNom) elemNom.textContent = user.nom;
                if (elemEmail) elemEmail.textContent = user.email;
            }
        });
    </script>
</body>

</html>